var e,t={};t=JSON.parse('[{"inputs":[{"internalType":"uint16","name":"newTweetLength","type":"uint16"}],"name":"changeTweetLength","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_tweet","type":"string"}],"name":"createTweet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"author","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"likeTweet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"author","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"unlikeTweet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"getAllTweets","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"author","type":"address"},{"internalType":"string","name":"content","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"likes","type":"uint256"}],"internalType":"struct Twitter.Tweet[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_i","type":"uint256"}],"name":"getTweet","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"author","type":"address"},{"internalType":"string","name":"content","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"likes","type":"uint256"}],"internalType":"struct Twitter.Tweet","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_TWEET_LENGTH","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"tweets","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"author","type":"address"},{"internalType":"string","name":"content","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"likes","type":"uint256"}],"stateMutability":"view","type":"function"}]');let n=new Web3(window.ethereum),a=new n.eth.Contract((e=t)&&e.__esModule?e.default:e,"0xe270F382e3AA0B07f6a962014700AC2Cb64c91e9");async function i(){if(window.ethereum){var e;let t=await ethereum.request({method:"eth_requestAccounts"}).catch(e=>{4001===e.code?console.log("Please connect to MetaMask."):console.error(e)});console.log(t),e=t[0],document.getElementById("userAddress").innerText="Connected: "+u(e),document.getElementById("connectMessage").style.display="none",document.getElementById("tweetForm").style.display="block",r(e)}else console.error("No web3 provider detected"),document.getElementById("connectMessage").innerText="No web3 provider detected. Please install MetaMask."}async function s(e){let t=await n.eth.getAccounts();try{await a.methods.createTweet(e).send({from:t[0]}),r(t[0])}catch(e){console.error("User rejected request:",e)}}async function r(e){let t=document.getElementById("tweetsContainer");t.innerHTML="";let n=[...await a.methods.getAllTweets(e).call()];n.sort((e,t)=>t.timestamp-e.timestamp);for(let a=0;a<n.length;a++){let i=document.createElement("div");i.className="tweet";let s=document.createElement("img");s.className="user-icon",s.src=`https://robohash.org/${n[a].author}.png?size=100x100&set=set1`,s.alt="User Icon",i.appendChild(s);let o=document.createElement("div");o.className="tweet-inner",o.innerHTML+=`
        <div class="author">${u(n[a].author)}</div>
        <div class="content">${n[a].content}</div>
    `;let p=document.createElement("button");p.className="like-button",p.innerHTML=`
        <i class="far fa-heart"></i>
        <span class="likes-count">${n[a].likes}</span>
    `,p.setAttribute("data-id",n[a].id),p.setAttribute("data-author",n[a].author),function(e,t,n,a){e.addEventListener("click",async e=>{e.preventDefault(),e.currentTarget.innerHTML='<div class="spinner"></div>',e.currentTarget.disabled=!0;try{await l(a,n),r(t)}catch(e){console.error("Error liking tweet:",e)}})}(p,e,n[a].id,n[a].author),o.appendChild(p),i.appendChild(o),t.appendChild(i)}}function u(e,t=6,n=4){return`${e.slice(0,t)}...${e.slice(-n)}`}async function l(e,t){let i=await n.eth.getAccounts();try{await a.methods.likeTweet(e,t).send({from:i[0]})}catch(e){console.error("User rejected request:",e)}}document.getElementById("connectWalletBtn").addEventListener("click",i),document.getElementById("tweetForm").addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("tweetContent").value,n=document.getElementById("tweetSubmitBtn");n.innerHTML='<div class="spinner"></div>',n.disabled=!0;try{await s(t)}catch(e){console.error("Error sending tweet:",e)}finally{n.innerHTML="Tweet",n.disabled=!1}});
//# sourceMappingURL=index.b8597375.js.map
